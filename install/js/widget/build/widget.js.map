{"version":3,"file":"widget.js","sources":["../utils/template.js","../step/abstractstep.js","../step/secure3d.js","../step/finish.js","../step/failure.js","../step/payment.js","../step/cart.js","../step/factory.js","../widget.js"],"sourcesContent":["export default class Template {\r\n\r\n\tstatic compile(template, vars) {\r\n\t\tlet key;\r\n\t\tlet replaceKey;\r\n\t\tlet replaceValue;\r\n\t\tlet result = template;\r\n\r\n\t\tfor (key in vars) {\r\n\t\t\tif (!vars.hasOwnProperty(key)) { continue; }\r\n\r\n\t\t\treplaceKey = '#' + key.toUpperCase() + '#';\r\n\t\t\treplaceValue = vars[key];\r\n\r\n\t\t\tdo {\r\n\t\t\t\tresult = result.replace(replaceKey, replaceValue);\r\n\t\t\t} while (result.indexOf(replaceKey) !== -1);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tstatic toElement(html) {\r\n\t\tconst context = document.createElement('div');\r\n\t\tcontext.innerHTML = html;\r\n\r\n\t\treturn context.firstElementChild;\r\n\t}\r\n\r\n}","import Template from '../utils/template';\r\n\r\nexport default class AbstractStep {\r\n\r\n\tstatic optionSection = null;\r\n\r\n\tstatic defaults = {\r\n\t\ttemplate: null,\r\n\t}\r\n\r\n\tconstructor(options = {}) {\r\n\t\tthis.options = Object.assign({}, this.constructor.defaults, options);\r\n\t\tthis.widget = null;\r\n\t}\r\n\r\n\tsetWidget(widget) {\r\n\t\tthis.widget = widget;\r\n\t}\r\n\r\n\tgetOption(key) {\r\n\t\tconst section = this.constructor.optionSection;\r\n\r\n\t\t/*if (this.widget.options[section] !== null && this.widget.options[section][key]) {\r\n\t\t\treturn this.widget.options[section][key];\r\n\t\t} else */if (key in this.options) {\r\n\t\t\treturn this.options[key];\r\n\t\t} else {\r\n\t\t\treturn this.widget.options[key];\r\n\t\t}\r\n\t}\r\n\r\n\trender(node, data = {}) {\r\n\t\tnode.innerHTML = this.compile(data);\r\n\t}\r\n\r\n\tcompile(data) {\r\n\t\treturn Template.compile(this.options.template, data);\r\n\t}\r\n\r\n\tgetTemplate(key) {\r\n\t\tlet optionKey = key + 'Template';\r\n\t\tlet option = this.options[optionKey];\r\n\t\tlet optionFirstSymbol = option.substr(0, 1);\r\n\t\tlet result;\r\n\r\n\t\tif (optionFirstSymbol === '.' || optionFirstSymbol === '#') {\r\n\t\t\tresult = this.getNode(option).innerHTML;\r\n\t\t} else {\r\n\t\t\tresult = option;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tgetElement(key, context, method) {\r\n\t\tlet selector = this.getElementSelector(key);\r\n\r\n\t\treturn this.getNode(selector, context, method || 'querySelector');\r\n\t}\r\n\r\n\tgetElementSelector(key) {\r\n\t\tlet optionKey = key + 'Element';\r\n\r\n\t\treturn this.options[optionKey];\r\n\t}\r\n\r\n\tgetNode(selector, context, method) {\r\n\t\tlet result;\r\n\r\n\t\tif (selector.substr(0, 1) === '#') { // is id query\r\n\t\t\tcontext = document;\r\n\t\t} else if (!context) {\r\n\t\t\tcontext = this.el;\r\n\t\t}\r\n\r\n\t\treturn context[method](selector);\r\n\t}\r\n\r\n}","import Template from '../utils/template';\r\nimport AbstractStep from \"./abstractstep\";\r\n\r\nexport default class Step3ds extends AbstractStep {\r\n\r\n\tstatic defaults = {\r\n\t\turl: '/yandex_pay.php',\r\n\r\n\t\ttemplate: '<form name=\"form\" action=\"#ACTION#\" method=\"#METHOD#\">'\r\n\t\t\t+ '#INPUTS#'\r\n\t\t\t+ '</form>',\r\n\t}\r\n\r\n\trender(node, data) {\r\n\t\tsuper.render(node, data);\r\n\t\tconsole.log(123);\r\n\t\tthis.autosubmit(node);\r\n\t}\r\n\r\n\tcompile(data) {\r\n\r\n\t\tconst template = this.options.template;\r\n\t\tconst vars = Object.assign(data, {\r\n\t\t\t'inputs': this.makeInputs(data)\r\n\t\t});\r\n\r\n\t\treturn Template.compile(template, vars);\r\n\t}\r\n\r\n\tmakeInputs(data) {\r\n\t\tlet key;\r\n\t\tlet vars = data.params;\r\n\t\tlet value;\r\n\t\tlet template;\r\n\r\n\t\tif (Object.keys(vars).length === 0) { return ''; }\r\n\r\n\t\ttemplate = data.termUrl ? '<input type=\"hidden\" name=\"TermUrl\" value=\"' + this.makeTermUrl() + '\">' : '';\r\n\r\n\t\tfor (key in vars)\r\n\t\t{\r\n\t\t\tif (!vars.hasOwnProperty(key)) { continue; }\r\n\r\n\t\t\tvalue = vars[key];\r\n\r\n\t\t\ttemplate += '<input type=\"hidden\" name=\"' + key + '\" value=\"' + value + '\">';\r\n\t\t}\r\n\r\n\t\treturn template;\r\n\t}\r\n\r\n\tmakeTermUrl() {\r\n\t\tlet result = this.getOption('YANDEX_PAY_NOTIFY_URL');\r\n\t\tlet backUrl = window.location.href;\r\n\r\n\t\tresult +=\r\n\t\t\t(result.indexOf('?') === -1 ? '?' : '&')\r\n\t\t\t+ 'backurl=' + encodeURIComponent(backUrl)\r\n\t\t\t+ '&service=' + this.getOption('requestSign')\r\n\t\t\t+ '&paymentId=' + this.getOption('externalId');\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tautosubmit(node) {\r\n\t\tconst form = node.querySelector('form');\r\n\r\n\t\tform.submit();\r\n\t}\r\n}","import Template from '../utils/template';\r\nimport AbstractStep from './abstractstep';\r\n\r\nexport default class Finish extends AbstractStep {\r\n\r\n\tstatic optionPrefix = 'finish';\r\n\r\n\tstatic defaults = {\r\n\t\ttemplate: '<div class=\"alert alert-success\" role=\"alert\"><strong>#MESSAGE#</strong></div>'\r\n\t}\r\n\r\n}","import AbstractStep from './abstractstep';\r\n\r\nexport default class Failure extends AbstractStep {\r\n\r\n\tstatic optionPrefix = 'failure';\r\n\r\n\tstatic defaults = {\r\n\t\ttemplate: '<div class=\"alert alert-danger\" role=\"alert\"><strong>#MESSAGE#</strong></div>'\r\n\t}\r\n\r\n}","import Template from '../utils/template';\r\nimport AbstractStep from './abstractstep';\r\nimport StepFactory from \"./factory\";\r\n\r\nconst YaPay = window.YaPay;\r\n\r\nexport default class Payment extends AbstractStep {\r\n\r\n\tstatic optionPrefix = 'payment';\r\n\r\n\tstatic defaults = {\r\n\t\ttemplate: '<div class=\"alert alert-success\" role=\"alert\"><strong>#MESSAGE#</strong></div>'\r\n\t}\r\n\r\n\trender(node, data) {\r\n\t\tconst paymentData = this.getPaymentData(data);\r\n\r\n\t\tthis.createPayment(node, paymentData);\r\n\t}\r\n\r\n\tcompile(data) {\r\n\t\treturn Template.compile(this.options.template, data);\r\n\t}\r\n\r\n\tgetPaymentData(data) {\r\n\t\treturn {\r\n\t\t\tenv: this.getOption('env'),\r\n\t\t\tversion: 2,\r\n\t\t\tcountryCode: YaPay.CountryCode.Ru,\r\n\t\t\tcurrencyCode: YaPay.CurrencyCode.Rub,\r\n\t\t\tmerchant: {\r\n\t\t\t\tid: this.getOption('merchantId'),\r\n\t\t\t\tname: this.getOption('merchantName')\r\n\t\t\t},\r\n\t\t\torder: {\r\n\t\t\t\tid: data.id,\r\n\t\t\t\ttotal: { amount: data.total },\r\n\t\t\t\titems: data.items\r\n\t\t\t},\r\n\t\t\tpaymentMethods: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: YaPay.PaymentMethodType.Card,\r\n\t\t\t\t\tgateway: this.getOption('gateway'),\r\n\t\t\t\t\tgatewayMerchantId: this.getOption('gatewayMerchantId'),\r\n\t\t\t\t\tallowedAuthMethods: [YaPay.AllowedAuthMethod.PanOnly],\r\n\t\t\t\t\tallowedCardNetworks: this.getOption('cardNetworks') || [\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.UnionPay,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Uzcard,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Discover,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.AmericanExpress,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Visa,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Mastercard,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Mir,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Maestro,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.VisaElectron\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t}\r\n\t}\r\n\r\n\tcreatePayment(node, paymentData) {\r\n\t\t// Создать платеж.\r\n\t\tYaPay.createPayment(paymentData)\r\n\t\t\t.then( (payment) => {\r\n\t\t\t\t// Создать экземпляр кнопки.\r\n\t\t\t\tlet button = payment.createButton({\r\n\t\t\t\t\ttype: YaPay.ButtonType.Pay,\r\n\t\t\t\t\ttheme: this.getOption('buttonTheme') || YaPay.ButtonTheme.Black,\r\n\t\t\t\t\twidth: this.getOption('buttonWidth') || YaPay.ButtonWidth.Auto,\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Смонтировать кнопку в DOM.\r\n\t\t\t\tbutton.mount(node);\r\n\r\n\t\t\t\t// Подписаться на событие click.\r\n\t\t\t\tbutton.on(YaPay.ButtonEventType.Click, function onPaymentButtonClick() {\r\n\t\t\t\t\t// Запустить оплату после клика на кнопку.\r\n\t\t\t\t\tpayment.checkout();\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Подписаться на событие process.\r\n\t\t\t\tpayment.on(YaPay.PaymentEventType.Process, (event) => {\r\n\t\t\t\t\t// Получить платежный токен.\r\n\t\t\t\t\t//alert({'Process': event});\r\n\r\n\t\t\t\t\t//alert(event);\r\n\t\t\t\t\tthis.notify(payment, event).then((resolve) => {\r\n\t\t\t\t\t\t//payment.complete(YaPay.CompleteReason.Success);\r\n\t\t\t\t\t});\r\n\r\n\r\n\r\n\t\t\t\t\t/*alert('Payment token — ' + event.token);\r\n\r\n\t\t\t\t\t// Опционально (если выполнить шаг 7).\r\n\t\t\t\t\talert('Billing email — ' + event.billingContact.email);\r\n\r\n\t\t\t\t\t// Закрыть форму Yandex Pay.\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tpayment.complete(YaPay.CompleteReason.Success);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Подписаться на событие error.\r\n\t\t\t\tpayment.on(YaPay.PaymentEventType.Error, function onPaymentError(event) {\r\n\t\t\t\t\t// Вывести информацию о недоступности оплаты в данный момент\r\n\t\t\t\t\t// и предложить пользователю другой способ оплаты.\r\n\r\n\t\t\t\t\t// Закрыть форму Yandex.Pay.\r\n\t\t\t\t\tconsole.log({'errors': event});\r\n\t\t\t\t\tpayment.complete(YaPay.CompleteReason.Error);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Подписаться на событие abort.\r\n\t\t\t\t// Это когда пользователь закрыл форму Yandex Pay.\r\n\t\t\t\tpayment.on(YaPay.PaymentEventType.Abort, function onPaymentAbort(event) {\r\n\t\t\t\t\t// Предложить пользователю другой способ оплаты.\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch(function (err) {\r\n\t\t\t\t// Платеж не создан.\r\n\t\t\t\tconsole.log({'payment not create': err});\r\n\t\t\t});\r\n\t}\r\n\r\n\tnotify(payment, yandexPayData) {\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tfetch(this.getOption('YANDEX_PAY_NOTIFY_URL'), {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tservice: this.getOption('requestSign'),\r\n\t\t\t\t\taccept: 'json',\r\n\t\t\t\t\tyandexData: yandexPayData,\r\n\t\t\t\t\texternalId: this.getOption('externalId'),\r\n\t\t\t\t\tpaySystemId: this.getOption('paySystemId')\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t\t.then(response => response.json())\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\t//payment.complete(YaPay.CompleteReason.Success);\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t\tif (result.success === true) {\r\n\t\t\t\t\t\tthis.widget.go(result.state, result);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.widget.go('error', result);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => alert(error) );\r\n\t\t});\r\n\t}\r\n}","import Template from '../utils/template';\r\nimport AbstractStep from './abstractstep';\r\n\r\nconst YaPay = window.YaPay;\r\n\r\nexport default class Cart extends AbstractStep {\r\n\r\n\trender(node, data) {\r\n\t\tthis.paymentData = this.getPaymentData(data);\r\n\r\n\t\tthis.createPayment(node, this.paymentData);\r\n\t}\r\n\r\n\tcompile(data) {\r\n\t\treturn Template.compile(this.options.template, data);\r\n\t}\r\n\r\n\tgetPaymentData(data) {\r\n\t\treturn {\r\n\t\t\tenv: this.getOption('env'),\r\n\t\t\tversion: 2,\r\n\t\t\tcountryCode: YaPay.CountryCode.Ru,\r\n\t\t\tcurrencyCode: YaPay.CurrencyCode.Rub,\r\n\t\t\tmerchant: {\r\n\t\t\t\tid: this.getOption('merchantId'),\r\n\t\t\t\tname: this.getOption('merchantName'),\r\n\t\t\t\turl: this.getOption('siteUrl')\r\n\t\t\t},\r\n\t\t\torder: {\r\n\t\t\t\tid: data.id,\r\n\t\t\t\ttotal: { amount: data.total }\r\n\t\t\t},\r\n\t\t\tpaymentMethods: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: YaPay.PaymentMethodType.Card,\r\n\t\t\t\t\tgateway: this.getOption('gateway'),\r\n\t\t\t\t\tgatewayMerchantId: this.getOption('gatewayMerchantId'),\r\n\t\t\t\t\tallowedAuthMethods: [YaPay.AllowedAuthMethod.PanOnly],\r\n\t\t\t\t\tallowedCardNetworks: this.getOption('cardNetworks') || [\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.UnionPay,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Uzcard,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Discover,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.AmericanExpress,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Visa,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Mastercard,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Mir,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Maestro,\r\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.VisaElectron\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\r\n\t\t\trequiredFields: {\r\n\r\n\t\t\t\tbillingContact: {\r\n\t\t\t\t\temail: this.getOption('useEmail') || false\r\n\t\t\t\t},\r\n\r\n\t\t\t\tshippingContact: {\r\n\t\t\t\t\tname: this.getOption('useName') || false,\r\n\t\t\t\t\temail: this.getOption('useEmail') || false,\r\n\t\t\t\t\tphone: this.getOption('usePhone') || false,\r\n\t\t\t\t},\r\n\r\n\t\t\t\tshippingTypes: {\r\n\t\t\t\t\tdirect: true,\r\n\t\t\t\t\tpickup: true,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcreatePayment(node, paymentData) {\r\n\t\t// Создать платеж.\r\n\t\tYaPay.createPayment(paymentData)\r\n\t\t\t.then( (payment) => {\r\n\t\t\t\t// Создать экземпляр кнопки.\r\n\t\t\t\tlet button = payment.createButton({\r\n\t\t\t\t\ttype: YaPay.ButtonType.Pay,\r\n\t\t\t\t\ttheme: this.getOption('buttonTheme') || YaPay.ButtonTheme.Black,\r\n\t\t\t\t\twidth: this.getOption('buttonWidth') || YaPay.ButtonWidth.Auto,\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Смонтировать кнопку в DOM.\r\n\t\t\t\tbutton.mount(node);\r\n\r\n\t\t\t\t// Подписаться на событие click.\r\n\t\t\t\tbutton.on(YaPay.ButtonEventType.Click, () => {\r\n\t\t\t\t\t// Заполенение товаров\r\n\t\t\t\t\tthis.fillProducts().then((result) => {\r\n\t\t\t\t\t\tpayment.update({\r\n\t\t\t\t\t\t\torder: this.exampleOrderWithProducts(result)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// Запустить оплату после клика на кнопку.\r\n\t\t\t\t\t\tpayment.checkout();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Подписаться на событие process.\r\n\t\t\t\tpayment.on(YaPay.PaymentEventType.Process, (event) => {\r\n\t\t\t\t\t// Получить платежный токен.\r\n\r\n\t\t\t\t\tthis.orderAccept('orderAccept', event).then((result) => {\r\n\t\t\t\t\t\tpayment.complete(YaPay.CompleteReason.Success);\r\n\t\t\t\t\t\tthis.notify(result, event);\r\n\r\n\t\t\t\t\t\t//payment.update({shippingOptions: result})\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t//this.notify(payment, event);\r\n\r\n\t\t\t\t\t//payment.complete(YaPay.CompleteReason.Success);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Подписаться на событие error.\r\n\t\t\t\tpayment.on(YaPay.PaymentEventType.Error, function onPaymentError(event) {\r\n\t\t\t\t\t// Вывести информацию о недоступности оплаты в данный момент\r\n\t\t\t\t\t// и предложить пользователю другой способ оплаты.\r\n\r\n\t\t\t\t\t// Закрыть форму Yandex.Pay.\r\n\t\t\t\t\tconsole.log({'errors': event});\r\n\t\t\t\t\tpayment.complete(YaPay.CompleteReason.Error);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Подписаться на событие abort.\r\n\t\t\t\t// Это когда пользователь закрыл форму Yandex Pay.\r\n\t\t\t\tpayment.on(YaPay.PaymentEventType.Abort, (event) => {\r\n\t\t\t\t\t// Предложить пользователю другой способ оплаты.\r\n\t\t\t\t});\r\n\r\n\t\t\t\tpayment.on(YaPay.PaymentEventType.Change, (event) => {\r\n\t\t\t\t\tconsole.log(222);\r\n\t\t\t\t\tif (event.shippingAddress) {\r\n\t\t\t\t\t\tthis.exampleDeliveryOptions('deliveryOptions', event.shippingAddress).then((result) => {\r\n\t\t\t\t\t\t\tpayment.update({shippingOptions: result})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (event.shippingOption){\r\n\t\t\t\t\t\tpayment.update({\r\n\t\t\t\t\t\t\torder: this.exampleOrderWithDirectShipping(event.shippingOption, payment),\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (event.pickupAddress) {\r\n\t\t\t\t\t\tthis.exampleDeliveryOptions('pickupOptions', event.pickupAddress).then((result) => {\r\n\t\t\t\t\t\t\tpayment.update({pickupOptions: result})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (event.pickupOption) {\r\n\t\t\t\t\t\tpayment.update({\r\n\t\t\t\t\t\t\torder: this.exampleOrderWithPickupShipping(event.pickupOption),\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch(function (err) {\r\n\t\t\t\t// Платеж не создан.\r\n\t\t\t\tconsole.log({'payment not create': err});\r\n\t\t\t});\r\n\t}\r\n\r\n\tfillProducts(){\r\n\t\treturn fetch(this.getOption('purchaseUrl'), {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tsiteId: this.getOption('siteId'),\r\n\t\t\t\tproductId: this.getOption('productId') || null,\r\n\t\t\t\tfUserId: this.getOption('fUserId'),\r\n\t\t\t\tuserId: this.getOption('userId') || null,\r\n\t\t\t\tsetupId: this.getOption('setupId') || null,\r\n\t\t\t\tyapayAction: 'getProducts',\r\n\t\t\t\tmode: this.getOption('mode')\r\n\t\t\t})\r\n\t\t})\r\n\t\t\t.then(response => {return response.json()})\r\n\t}\r\n\r\n\tnotify(payment, yandexPayData) {\r\n\t\tfetch(this.getOption('notifyUrl'), {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tservice: this.getOption('requestSign'),\r\n\t\t\t\taccept: 'json',\r\n\t\t\t\tyandexData: yandexPayData,\r\n\t\t\t\texternalId: payment.externalId,\r\n\t\t\t\t//paySystemId: this.getOption('paySystemId')\r\n\t\t\t})\r\n\t\t})\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(result => {\r\n\t\t\t\tif (result.success === true) {\r\n\t\t\t\t\tthis.widget.go(result.state, result);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.widget.go('error', result);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\torderAccept(action, event){\r\n\t\treturn fetch(this.getOption('purchaseUrl'), {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tsiteId: this.getOption('siteId'),\r\n\t\t\t\tproductId: this.getOption('productId') || null,\r\n\t\t\t\torder: this.paymentData.order,\r\n\t\t\t\tfUserId: this.getOption('fUserId'),\r\n\t\t\t\tuserId: this.getOption('userId') || null,\r\n\t\t\t\tsetupId: this.getOption('setupId') || null,\r\n\t\t\t\tyapayAction: action,\r\n\t\t\t\taddress: event.shippingMethodInfo.shippingAddress,\r\n\t\t\t\tcontact: event.shippingContact,\r\n\t\t\t\tpaySystemId: this.getOption('paySystemId') || null,\r\n\t\t\t\tmode: this.getOption('mode'),\r\n\t\t\t\tdelivery: event.shippingMethodInfo.shippingOption || event.shippingMethodInfo.pickupOptions\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(response => {return response.json()})\r\n\t}\r\n\r\n\texampleDeliveryOptions(action, address){\r\n\t\treturn fetch(this.getOption('purchaseUrl'), {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tsiteId: this.getOption('siteId'),\r\n\t\t\t\tproductId: this.getOption('productId') || null,\r\n\t\t\t\tfUserId: this.getOption('fUserId'),\r\n\t\t\t\tuserId: this.getOption('userId') || null,\r\n\t\t\t\tsetupId: this.getOption('setupId') || null,\r\n\t\t\t\tmode: this.getOption('mode'),\r\n\t\t\t\taddress: address,\r\n\t\t\t\tyapayAction: action\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(response => {return response.json()})\r\n\t}\r\n\r\n\texampleOrderWithDirectShipping(shippingOption) {\r\n\t\tconst { order } = this.paymentData;\r\n\r\n\t\tconsole.log(shippingOption);\r\n\r\n\t\treturn {\r\n\t\t\t...order,\r\n\t\t\titems: [\r\n\t\t\t\t...order.items,\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'SHIPPING',\r\n\t\t\t\t\tlabel: shippingOption.label,\r\n\t\t\t\t\tamount: shippingOption.amount,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\ttotal: {\r\n\t\t\t\t...order.total,\r\n\t\t\t\tamount: this.amountSum(order.total.amount, shippingOption.amount),\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\texampleOrderWithPickupShipping(pickupOption) {\r\n\t\tconst { order } = this.paymentData;\r\n\r\n\t\treturn {\r\n\t\t\t...order,\r\n\t\t\titems: [\r\n\t\t\t\t...order.items,\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'SHIPPING',\r\n\t\t\t\t\tlabel: pickupOption.label,\r\n\t\t\t\t\tamount: pickupOption.amount,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\ttotal: {\r\n\t\t\t\t...order.total,\r\n\t\t\t\tamount: this.amountSum(order.total.amount, pickupOption.amount),\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\texampleOrderWithProducts(products) {\r\n\t\tconst { order } = this.paymentData;\r\n\r\n\t\tlet exampleOrder = {\r\n\t\t\t...order,\r\n\t\t\titems: products.items,\r\n\t\t\ttotal: {\r\n\t\t\t\t...order.total,\r\n\t\t\t\tamount: this.amountSum(0, products.amount),\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tObject.assign(this.paymentData.order, exampleOrder);\r\n\r\n\t\treturn exampleOrder;\r\n\t}\r\n\r\n\tamountSum(amountA, amountB) {\r\n\t\treturn (Number(amountA) + Number(amountB)).toFixed(2);\r\n\t}\r\n}","import Secure3d from './secure3d';\r\nimport Finish from './finish';\r\nimport Failure from './failure';\r\nimport Payment from './payment';\r\nimport Cart from \"./cart\";\r\n\r\nexport default class Factory {\r\n\r\n\tstatic make(type) {\r\n\t\tif (type === '3ds') {\r\n\t\t\treturn new Secure3d();\r\n\t\t} else if (type === 'finished') {\r\n\t\t\treturn new Finish();\r\n\t\t} else if (type === 'error') {\r\n\t\t\treturn new Failure();\r\n\t\t} else if (type === 'payment') {\r\n\t\t\treturn new Payment();\r\n\t\t} else if (type === 'cart'){\r\n\t\t\treturn new Cart();\r\n\t\t}\r\n\r\n\t\tthrow new Error('unknown step ' + type);\r\n\t}\r\n\r\n}","import StepFactory from './step/factory';\r\n\r\nexport class Widget {\r\n\r\n\tdefaults = {\r\n\t\tfinishedTemplate:   '<div class=\"alert alert-success\" role=\"alert\"><strong>#MESSAGE#</strong></div>',\r\n\t\tfailureTemplate:      '<div class=\"alert alert-danger\" role=\"alert\"><strong>#MESSAGE#</strong></div>',\r\n\t\tmodalTemplate:      '<div class=\"yandex-pay-modal-inner\">#IFRAME#</div>',\r\n\t}\r\n\r\n\tconstructor(element, options = {}) {\r\n\t\tthis.el = element;\r\n\t\tthis.options = Object.assign({}, this.defaults, options);\r\n\t}\r\n\r\n\tpayment(data) {\r\n\t\tthis.go('payment', data);\r\n\t}\r\n\r\n\tcart(data){\r\n\t\tthis.go('cart', data);\r\n\t}\r\n\r\n\tgo(type, data) {\r\n\t\tconst step = this.makeStep(type);\r\n\r\n\t\tstep.render(this.el, data);\r\n\t}\r\n\r\n\tmakeStep(type) {\r\n\t\tconst step = StepFactory.make(type);\r\n\r\n\t\tstep.setWidget(this);\r\n\r\n\t\treturn step;\r\n\t}\r\n}\r\n"],"names":["Template","template","vars","key","replaceKey","replaceValue","result","hasOwnProperty","toUpperCase","replace","indexOf","html","context","document","createElement","innerHTML","firstElementChild","AbstractStep","options","Object","assign","constructor","defaults","widget","section","optionSection","node","data","compile","optionKey","option","optionFirstSymbol","substr","getNode","method","selector","getElementSelector","el","Step3ds","console","log","autosubmit","makeInputs","params","value","keys","length","termUrl","makeTermUrl","getOption","backUrl","window","location","href","encodeURIComponent","form","querySelector","submit","url","Finish","Failure","YaPay","Payment","paymentData","getPaymentData","createPayment","env","version","countryCode","CountryCode","Ru","currencyCode","CurrencyCode","Rub","merchant","id","name","order","total","amount","items","paymentMethods","type","PaymentMethodType","Card","gateway","gatewayMerchantId","allowedAuthMethods","AllowedAuthMethod","PanOnly","allowedCardNetworks","AllowedCardNetwork","UnionPay","Uzcard","Discover","AmericanExpress","Visa","Mastercard","Mir","Maestro","VisaElectron","then","payment","button","createButton","ButtonType","Pay","theme","ButtonTheme","Black","width","ButtonWidth","Auto","mount","on","ButtonEventType","Click","onPaymentButtonClick","checkout","PaymentEventType","Process","event","notify","resolve","complete","CompleteReason","Success","Error","onPaymentError","Abort","onPaymentAbort","catch","err","yandexPayData","Promise","fetch","headers","body","JSON","stringify","service","accept","yandexData","externalId","paySystemId","response","json","success","go","state","error","alert","Cart","requiredFields","billingContact","email","shippingContact","phone","shippingTypes","direct","pickup","fillProducts","update","exampleOrderWithProducts","orderAccept","Change","shippingAddress","exampleDeliveryOptions","shippingOptions","shippingOption","exampleOrderWithDirectShipping","pickupAddress","pickupOptions","pickupOption","exampleOrderWithPickupShipping","siteId","productId","fUserId","userId","setupId","yapayAction","mode","action","address","shippingMethodInfo","contact","delivery","label","amountSum","products","exampleOrder","amountA","amountB","Number","toFixed","Factory","Secure3d","Widget","element","finishedTemplate","failureTemplate","modalTemplate","step","makeStep","render","StepFactory","make","setWidget"],"mappings":"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"}