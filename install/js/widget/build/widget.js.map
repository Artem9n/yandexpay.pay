{"version":3,"file":"widget.js","sources":["../utils/template.js","../step/abstractstep.js","../step/secure3d.js","../step/finish.js","../step/failure.js","../step/payment.js","../step/factory.js","../widget.js"],"sourcesContent":["export default class Template {\n\n\tstatic compile(template, vars) {\n\t\tlet key;\n\t\tlet replaceKey;\n\t\tlet replaceValue;\n\t\tlet result = template;\n\n\t\tfor (key in vars) {\n\t\t\tif (!vars.hasOwnProperty(key)) { continue; }\n\n\t\t\treplaceKey = '#' + key.toUpperCase() + '#';\n\t\t\treplaceValue = vars[key];\n\n\t\t\tdo {\n\t\t\t\tresult = result.replace(replaceKey, replaceValue);\n\t\t\t} while (result.indexOf(replaceKey) !== -1);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic toElement(html) {\n\t\tconst context = document.createElement('div');\n\t\tcontext.innerHTML = html;\n\n\t\treturn context.firstElementChild;\n\t}\n\n}","import Template from '../utils/template';\n\nexport default class AbstractStep {\n\n\tstatic optionSection = null;\n\n\tstatic defaults = {\n\t\ttemplate: null,\n\t}\n\n\tconstructor(options = {}) {\n\t\tthis.options = Object.assign({}, this.constructor.defaults, options);\n\t\tthis.widget = null;\n\t}\n\n\tsetWidget(widget) {\n\t\tthis.widget = widget;\n\t}\n\n\tgetOption(key) {\n\t\tconst section = this.constructor.optionSection;\n\n\t\t/*if (this.widget.options[section] !== null && this.widget.options[section][key]) {\n\t\t\treturn this.widget.options[section][key];\n\t\t} else */if (key in this.options) {\n\t\t\treturn this.options[key];\n\t\t} else {\n\t\t\treturn this.widget.options[key];\n\t\t}\n\t}\n\n\trender(node, data = {}) {\n\t\tnode.innerHTML = this.compile(data);\n\t}\n\n\tcompile(data) {\n\t\treturn Template.compile(this.options.template, data);\n\t}\n\n\tgetTemplate(key) {\n\t\tlet optionKey = key + 'Template';\n\t\tlet option = this.options[optionKey];\n\t\tlet optionFirstSymbol = option.substr(0, 1);\n\t\tlet result;\n\n\t\tif (optionFirstSymbol === '.' || optionFirstSymbol === '#') {\n\t\t\tresult = this.getNode(option).innerHTML;\n\t\t} else {\n\t\t\tresult = option;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetElement(key, context, method) {\n\t\tlet selector = this.getElementSelector(key);\n\n\t\treturn this.getNode(selector, context, method || 'querySelector');\n\t}\n\n\tgetElementSelector(key) {\n\t\tlet optionKey = key + 'Element';\n\n\t\treturn this.options[optionKey];\n\t}\n\n\tgetNode(selector, context, method) {\n\t\tlet result;\n\n\t\tif (selector.substr(0, 1) === '#') { // is id query\n\t\t\tcontext = document;\n\t\t} else if (!context) {\n\t\t\tcontext = this.el;\n\t\t}\n\n\t\treturn context[method](selector);\n\t}\n\n}","import Template from '../utils/template';\nimport AbstractStep from \"./abstractstep\";\n\nexport default class Step3ds extends AbstractStep {\n\n\tstatic defaults = {\n\t\turl: '/yandex_pay.php',\n\n\t\ttemplate: '<form name=\"form\" action=\"#ACTION#\" method=\"post\">'\n\t\t\t+ '<input type=\"hidden\" name=\"TermUrl\" value=\"#TERMURL#\" >'\n\t\t\t+ '<input type=\"hidden\" name=\"MD\" value=\"#MD#\" >'\n\t\t\t+ '<input type=\"hidden\" name=\"PaReq\" value=\"#PAREQ#\" >'\n\t\t\t+ '</form>',\n\t}\n\n\trender(node, data) {\n\t\tsuper.render(node, data);\n\t\tthis.autosubmit(node);\n\t}\n\n\tcompile(data) {\n\t\tconst template = this.options.template;\n\t\tconst vars = Object.assign(data, {\n\t\t\t'TermUrl': this.makeTermUrl(),\n\t\t});\n\n\t\treturn Template.compile(template, vars);\n\t}\n\n\tmakeTermUrl() {\n\t\tlet result = this.getOption('YANDEX_PAY_NOTIFY_URL');\n\t\tlet backUrl = window.location.href;\n\n\t\tresult +=\n\t\t\t(result.indexOf('?') === -1 ? '?' : '&')\n\t\t\t+ 'backurl=' + encodeURIComponent(backUrl)\n\t\t\t+ '&service=' + this.getOption('requestSign')\n\t\t\t+ '&paymentId=' + this.getOption('externalId');\n\n\t\treturn result;\n\t}\n\n\tautosubmit(node) {\n\t\tconst form = node.querySelector('form')\n\n\t\tform.submit();\n\t}\n}","import Template from '../utils/template';\nimport AbstractStep from './abstractstep';\n\nexport default class Finish extends AbstractStep {\n\n\tstatic optionPrefix = 'finish';\n\n\tstatic defaults = {\n\t\ttemplate: '<div class=\"alert alert-success\" role=\"alert\"><strong>#MESSAGE#</strong></div>'\n\t}\n\n}","import AbstractStep from './abstractstep';\n\nexport default class Failure extends AbstractStep {\n\n\tstatic optionPrefix = 'failure';\n\n\tstatic defaults = {\n\t\ttemplate: '<div class=\"alert alert-danger\" role=\"alert\"><strong>#MESSAGE#</strong></div>'\n\t}\n\n}","import Template from '../utils/template';\nimport AbstractStep from './abstractstep';\nimport StepFactory from \"./factory\";\n\nconst YaPay = window.YaPay;\n\nexport default class Payment extends AbstractStep {\n\n\tstatic optionPrefix = 'payment';\n\n\tstatic defaults = {\n\t\ttemplate: '<div class=\"alert alert-success\" role=\"alert\"><strong>#MESSAGE#</strong></div>'\n\t}\n\n\trender(node, data) {\n\t\tconst paymentData = this.getPaymentData(data);\n\n\t\tthis.createPayment(node, paymentData);\n\t}\n\n\tcompile(data) {\n\t\treturn Template.compile(this.options.template, data);\n\t}\n\n\tgetPaymentData(data) {\n\t\treturn {\n\t\t\tenv: this.getOption('env'),\n\t\t\tversion: 2,\n\t\t\tcountryCode: YaPay.CountryCode.Ru,\n\t\t\tcurrencyCode: YaPay.CurrencyCode.Rub,\n\t\t\tmerchant: {\n\t\t\t\tid: this.getOption('merchantId'),\n\t\t\t\tname: this.getOption('merchantName')\n\t\t\t},\n\t\t\torder: {\n\t\t\t\tid: data.id,\n\t\t\t\ttotal: { amount: data.total },\n\t\t\t\titems: data.items\n\t\t\t},\n\t\t\tpaymentMethods: [\n\t\t\t\t{\n\t\t\t\t\ttype: YaPay.PaymentMethodType.Card,\n\t\t\t\t\tgateway: this.getOption('gateway'),\n\t\t\t\t\tgatewayMerchantId: this.getOption('gatewayMerchantId'),\n\t\t\t\t\tallowedAuthMethods: [YaPay.AllowedAuthMethod.PanOnly],\n\t\t\t\t\tallowedCardNetworks: [\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.UnionPay,\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Uzcard,\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Discover,\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.AmericanExpress,\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Visa,\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Mastercard,\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Mir,\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.Maestro,\n\t\t\t\t\t\tYaPay.AllowedCardNetwork.VisaElectron\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t}\n\t}\n\n\tcreatePayment(node, paymentData) {\n\t\t// Создать платеж.\n\t\tYaPay.createPayment(paymentData)\n\t\t\t.then( (payment) => {\n\t\t\t\t// Создать экземпляр кнопки.\n\t\t\t\tlet button = payment.createButton({\n\t\t\t\t\ttype: YaPay.ButtonType.Pay,\n\t\t\t\t\ttheme: this.getOption('buttonTheme') || YaPay.ButtonTheme.Black,\n\t\t\t\t\twidth: this.getOption('buttonWidth') || YaPay.ButtonWidth.Auto,\n\t\t\t\t});\n\n\t\t\t\t// Смонтировать кнопку в DOM.\n\t\t\t\tbutton.mount(node);\n\n\t\t\t\t// Подписаться на событие click.\n\t\t\t\tbutton.on(YaPay.ButtonEventType.Click, function onPaymentButtonClick() {\n\t\t\t\t\t// Запустить оплату после клика на кнопку.\n\t\t\t\t\tpayment.checkout();\n\t\t\t\t});\n\n\t\t\t\t// Подписаться на событие process.\n\t\t\t\tpayment.on(YaPay.PaymentEventType.Process, (event) => {\n\t\t\t\t\t// Получить платежный токен.\n\t\t\t\t\tconsole.log(event);\n\n\t\t\t\t\tthis.notify(payment, event);\n\n\t\t\t\t\t/*alert('Payment token — ' + event.token);\n\n\t\t\t\t\t// Опционально (если выполнить шаг 7).\n\t\t\t\t\talert('Billing email — ' + event.billingContact.email);\n\n\t\t\t\t\t// Закрыть форму Yandex Pay.\n\t\t\t\t\t*/\n\t\t\t\t\t//payment.complete(YaPay.CompleteReason.Success);\n\t\t\t\t});\n\n\t\t\t\t// Подписаться на событие error.\n\t\t\t\tpayment.on(YaPay.PaymentEventType.Error, function onPaymentError(event) {\n\t\t\t\t\t// Вывести информацию о недоступности оплаты в данный момент\n\t\t\t\t\t// и предложить пользователю другой способ оплаты.\n\n\t\t\t\t\t// Закрыть форму Yandex.Pay.\n\t\t\t\t\tconsole.log({'errors': event});\n\t\t\t\t\tpayment.complete(YaPay.CompleteReason.Error);\n\t\t\t\t});\n\n\t\t\t\t// Подписаться на событие abort.\n\t\t\t\t// Это когда пользователь закрыл форму Yandex Pay.\n\t\t\t\tpayment.on(YaPay.PaymentEventType.Abort, function onPaymentAbort(event) {\n\t\t\t\t\t// Предложить пользователю другой способ оплаты.\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\t// Платеж не создан.\n\t\t\t\tconsole.log({'payment not create': err});\n\t\t\t});\n\t}\n\n\tnotify(payment, yandexPayData) {\n\t\tfetch(this.getOption('YANDEX_PAY_NOTIFY_URL'), {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tservice: this.getOption('requestSign'),\n\t\t\t\taccept: 'json',\n\t\t\t\tyandexData: yandexPayData,\n\t\t\t\texternalId: this.getOption('externalId'),\n\t\t\t\tpaySystemId: this.getOption('paySystemId')\n\t\t\t})\n\t\t})\n\t\t\t.then(response => response.json())\n\t\t\t.then(result => {\n\t\t\t\tpayment.complete(YaPay.CompleteReason.Success);\n\n\t\t\t\tif (result.success === true) {\n\t\t\t\t\tthis.widget.go(result.state, result);\n\t\t\t\t} else {\n\t\t\t\t\tthis.widget.go('error', result);\n\t\t\t\t}\n\t\t\t});\n\t}\n}","import Secure3d from './secure3d';\nimport Finish from './finish';\nimport Failure from './failure';\nimport Payment from './payment';\n\nexport default class Factory {\n\n\tstatic make(type) {\n\t\tif (type === '3ds') {\n\t\t\treturn new Secure3d();\n\t\t} else if (type === 'finished') {\n\t\t\treturn new Finish();\n\t\t} else if (type === 'error') {\n\t\t\treturn new Failure();\n\t\t} else if (type === 'payment') {\n\t\t\treturn new Payment();\n\t\t}\n\n\t\tthrow new Error('unknown step ' + type);\n\t}\n\n}","import StepFactory from './step/factory';\n\nexport class Widget {\n\n\tdefaults = {\n\t\tfinishedTemplate:   '<div class=\"alert alert-success\" role=\"alert\"><strong>#MESSAGE#</strong></div>',\n\t\tfailureTemplate:      '<div class=\"alert alert-danger\" role=\"alert\"><strong>#MESSAGE#</strong></div>',\n\t\tmodalTemplate:      '<div class=\"yandex-pay-modal-inner\">#IFRAME#</div>',\n\t}\n\n\tconstructor(element, options = {}) {\n\t\tthis.el = element;\n\t\tthis.options = Object.assign({}, this.defaults, options);\n\t}\n\n\tpayment(data) {\n\t\tthis.go('payment', data);\n\t}\n\n\tgo(type, data) {\n\t\tconst step = this.makeStep(type);\n\n\t\tstep.render(this.el, data);\n\t}\n\n\tmakeStep(type) {\n\t\tconst step = StepFactory.make(type);\n\n\t\tstep.setWidget(this);\n\n\t\treturn step;\n\t}\n}\n"],"names":["Template","template","vars","key","replaceKey","replaceValue","result","hasOwnProperty","toUpperCase","replace","indexOf","html","context","document","createElement","innerHTML","firstElementChild","AbstractStep","options","Object","assign","constructor","defaults","widget","section","optionSection","node","data","compile","optionKey","option","optionFirstSymbol","substr","getNode","method","selector","getElementSelector","el","Step3ds","autosubmit","makeTermUrl","getOption","backUrl","window","location","href","encodeURIComponent","form","querySelector","submit","url","Finish","Failure","YaPay","Payment","paymentData","getPaymentData","createPayment","env","version","countryCode","CountryCode","Ru","currencyCode","CurrencyCode","Rub","merchant","id","name","order","total","amount","items","paymentMethods","type","PaymentMethodType","Card","gateway","gatewayMerchantId","allowedAuthMethods","AllowedAuthMethod","PanOnly","allowedCardNetworks","AllowedCardNetwork","UnionPay","Uzcard","Discover","AmericanExpress","Visa","Mastercard","Mir","Maestro","VisaElectron","then","payment","button","createButton","ButtonType","Pay","theme","ButtonTheme","Black","width","ButtonWidth","Auto","mount","on","ButtonEventType","Click","onPaymentButtonClick","checkout","PaymentEventType","Process","event","console","log","notify","Error","onPaymentError","complete","CompleteReason","Abort","onPaymentAbort","catch","err","yandexPayData","fetch","headers","body","JSON","stringify","service","accept","yandexData","externalId","paySystemId","response","json","Success","success","go","state","Factory","Secure3d","Widget","element","finishedTemplate","failureTemplate","modalTemplate","step","makeStep","render","StepFactory","make","setWidget"],"mappings":";;;;KAAqBA;;;;;;;6BAELC,UAAUC,MAAM;CAC9B,UAAIC,GAAJ;CACA,UAAIC,UAAJ;CACA,UAAIC,YAAJ;CACA,UAAIC,MAAM,GAAGL,QAAb;;CAEA,WAAKE,GAAL,IAAYD,IAAZ,EAAkB;CACjB,YAAI,CAACA,IAAI,CAACK,cAAL,CAAoBJ,GAApB,CAAL,EAA+B;CAAE;CAAW;;CAE5CC,QAAAA,UAAU,GAAG,MAAMD,GAAG,CAACK,WAAJ,EAAN,GAA0B,GAAvC;CACAH,QAAAA,YAAY,GAAGH,IAAI,CAACC,GAAD,CAAnB;;CAEA,WAAG;CACFG,UAAAA,MAAM,GAAGA,MAAM,CAACG,OAAP,CAAeL,UAAf,EAA2BC,YAA3B,CAAT;CACA,SAFD,QAESC,MAAM,CAACI,OAAP,CAAeN,UAAf,MAA+B,CAAC,CAFzC;CAGA;;CAED,aAAOE,MAAP;CACA;;;+BAEgBK,MAAM;CACtB,UAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAhB;CACAF,MAAAA,OAAO,CAACG,SAAR,GAAoBJ,IAApB;CAEA,aAAOC,OAAO,CAACI,iBAAf;CACA;;;;;KCzBmBC;CAQpB,0BAA0B;CAAA,QAAdC,OAAc,uEAAJ,EAAI;CAAA;CACzB,SAAKA,OAAL,GAAeC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKC,WAAL,CAAiBC,QAAnC,EAA6CJ,OAA7C,CAAf;CACA,SAAKK,MAAL,GAAc,IAAd;CACA;;;;+BAESA,QAAQ;CACjB,WAAKA,MAAL,GAAcA,MAAd;CACA;;;+BAESpB,KAAK;CACd,UAAMqB,OAAO,GAAG,KAAKH,WAAL,CAAiBI,aAAjC;CAEA;CACF;CACA;;CAAW,UAAItB,GAAG,IAAI,KAAKe,OAAhB,EAAyB;CACjC,eAAO,KAAKA,OAAL,CAAaf,GAAb,CAAP;CACA,OAFQ,MAEF;CACN,eAAO,KAAKoB,MAAL,CAAYL,OAAZ,CAAoBf,GAApB,CAAP;CACA;CACD;;;4BAEMuB,MAAiB;CAAA,UAAXC,IAAW,uEAAJ,EAAI;CACvBD,MAAAA,IAAI,CAACX,SAAL,GAAiB,KAAKa,OAAL,CAAaD,IAAb,CAAjB;CACA;;;6BAEOA,MAAM;CACb,aAAO3B,QAAQ,CAAC4B,OAAT,CAAiB,KAAKV,OAAL,CAAajB,QAA9B,EAAwC0B,IAAxC,CAAP;CACA;;;iCAEWxB,KAAK;CAChB,UAAI0B,SAAS,GAAG1B,GAAG,GAAG,UAAtB;CACA,UAAI2B,MAAM,GAAG,KAAKZ,OAAL,CAAaW,SAAb,CAAb;CACA,UAAIE,iBAAiB,GAAGD,MAAM,CAACE,MAAP,CAAc,CAAd,EAAiB,CAAjB,CAAxB;CACA,UAAI1B,MAAJ;;CAEA,UAAIyB,iBAAiB,KAAK,GAAtB,IAA6BA,iBAAiB,KAAK,GAAvD,EAA4D;CAC3DzB,QAAAA,MAAM,GAAG,KAAK2B,OAAL,CAAaH,MAAb,EAAqBf,SAA9B;CACA,OAFD,MAEO;CACNT,QAAAA,MAAM,GAAGwB,MAAT;CACA;;CAED,aAAOxB,MAAP;CACA;;;gCAEUH,KAAKS,SAASsB,QAAQ;CAChC,UAAIC,QAAQ,GAAG,KAAKC,kBAAL,CAAwBjC,GAAxB,CAAf;CAEA,aAAO,KAAK8B,OAAL,CAAaE,QAAb,EAAuBvB,OAAvB,EAAgCsB,MAAM,IAAI,eAA1C,CAAP;CACA;;;wCAEkB/B,KAAK;CACvB,UAAI0B,SAAS,GAAG1B,GAAG,GAAG,SAAtB;CAEA,aAAO,KAAKe,OAAL,CAAaW,SAAb,CAAP;CACA;;;6BAEOM,UAAUvB,SAASsB,QAAQ;AAClC;CAEA,UAAIC,QAAQ,CAACH,MAAT,CAAgB,CAAhB,EAAmB,CAAnB,MAA0B,GAA9B,EAAmC;CAAE;CACpCpB,QAAAA,OAAO,GAAGC,QAAV;CACA,OAFD,MAEO,IAAI,CAACD,OAAL,EAAc;CACpBA,QAAAA,OAAO,GAAG,KAAKyB,EAAf;CACA;;CAED,aAAOzB,OAAO,CAACsB,MAAD,CAAP,CAAgBC,QAAhB,CAAP;CACA;;;;;6BA1EmBlB,+BAEG;6BAFHA,0BAIF;CACjBhB,EAAAA,QAAQ,EAAE;CADO;;KCHEqC;;;;;;;;;;4BAYbZ,MAAMC,MAAM;CAClB,kGAAaD,IAAb,EAAmBC,IAAnB;CACA,WAAKY,UAAL,CAAgBb,IAAhB;CACA;;;6BAEOC,MAAM;CACb,UAAM1B,QAAQ,GAAG,KAAKiB,OAAL,CAAajB,QAA9B;CACA,UAAMC,IAAI,GAAGiB,MAAM,CAACC,MAAP,CAAcO,IAAd,EAAoB;CAChC,mBAAW,KAAKa,WAAL;CADqB,OAApB,CAAb;CAIA,aAAOxC,QAAQ,CAAC4B,OAAT,CAAiB3B,QAAjB,EAA2BC,IAA3B,CAAP;CACA;;;mCAEa;CACb,UAAII,MAAM,GAAG,KAAKmC,SAAL,CAAe,uBAAf,CAAb;CACA,UAAIC,OAAO,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAA9B;CAEAvC,MAAAA,MAAM,IACL,CAACA,MAAM,CAACI,OAAP,CAAe,GAAf,MAAwB,CAAC,CAAzB,GAA6B,GAA7B,GAAmC,GAApC,IACE,UADF,GACeoC,kBAAkB,CAACJ,OAAD,CADjC,GAEE,WAFF,GAEgB,KAAKD,SAAL,CAAe,aAAf,CAFhB,GAGE,aAHF,GAGkB,KAAKA,SAAL,CAAe,YAAf,CAJnB;CAMA,aAAOnC,MAAP;CACA;;;gCAEUoB,MAAM;CAChB,UAAMqB,IAAI,GAAGrB,IAAI,CAACsB,aAAL,CAAmB,MAAnB,CAAb;CAEAD,MAAAA,IAAI,CAACE,MAAL;CACA;;;GA3CmChC;;6BAAhBqB,qBAEF;CACjBY,EAAAA,GAAG,EAAE,iBADY;CAGjBjD,EAAAA,QAAQ,EAAE,uDACP,yDADO,GAEP,+CAFO,GAGP,qDAHO,GAIP;CAPc;;KCFEkD;;;;;;;;;GAAelC;;6BAAfkC,wBAEE;6BAFFA,oBAIF;CACjBlD,EAAAA,QAAQ,EAAE;CADO;;KCLEmD;;;;;;;;;GAAgBnC;;6BAAhBmC,yBAEE;6BAFFA,qBAIF;CACjBnD,EAAAA,QAAQ,EAAE;CADO;;CCFnB,IAAMoD,KAAK,GAAGV,MAAM,CAACU,KAArB;;KAEqBC;;;;;;;;;;4BAQb5B,MAAMC,MAAM;CAClB,UAAM4B,WAAW,GAAG,KAAKC,cAAL,CAAoB7B,IAApB,CAApB;CAEA,WAAK8B,aAAL,CAAmB/B,IAAnB,EAAyB6B,WAAzB;CACA;;;6BAEO5B,MAAM;CACb,aAAO3B,QAAQ,CAAC4B,OAAT,CAAiB,KAAKV,OAAL,CAAajB,QAA9B,EAAwC0B,IAAxC,CAAP;CACA;;;oCAEcA,MAAM;CACpB,aAAO;CACN+B,QAAAA,GAAG,EAAE,KAAKjB,SAAL,CAAe,KAAf,CADC;CAENkB,QAAAA,OAAO,EAAE,CAFH;CAGNC,QAAAA,WAAW,EAAEP,KAAK,CAACQ,WAAN,CAAkBC,EAHzB;CAINC,QAAAA,YAAY,EAAEV,KAAK,CAACW,YAAN,CAAmBC,GAJ3B;CAKNC,QAAAA,QAAQ,EAAE;CACTC,UAAAA,EAAE,EAAE,KAAK1B,SAAL,CAAe,YAAf,CADK;CAET2B,UAAAA,IAAI,EAAE,KAAK3B,SAAL,CAAe,cAAf;CAFG,SALJ;CASN4B,QAAAA,KAAK,EAAE;CACNF,UAAAA,EAAE,EAAExC,IAAI,CAACwC,EADH;CAENG,UAAAA,KAAK,EAAE;CAAEC,YAAAA,MAAM,EAAE5C,IAAI,CAAC2C;CAAf,WAFD;CAGNE,UAAAA,KAAK,EAAE7C,IAAI,CAAC6C;CAHN,SATD;CAcNC,QAAAA,cAAc,EAAE,CACf;CACCC,UAAAA,IAAI,EAAErB,KAAK,CAACsB,iBAAN,CAAwBC,IAD/B;CAECC,UAAAA,OAAO,EAAE,KAAKpC,SAAL,CAAe,SAAf,CAFV;CAGCqC,UAAAA,iBAAiB,EAAE,KAAKrC,SAAL,CAAe,mBAAf,CAHpB;CAICsC,UAAAA,kBAAkB,EAAE,CAAC1B,KAAK,CAAC2B,iBAAN,CAAwBC,OAAzB,CAJrB;CAKCC,UAAAA,mBAAmB,EAAE,CACpB7B,KAAK,CAAC8B,kBAAN,CAAyBC,QADL,EAEpB/B,KAAK,CAAC8B,kBAAN,CAAyBE,MAFL,EAGpBhC,KAAK,CAAC8B,kBAAN,CAAyBG,QAHL,EAIpBjC,KAAK,CAAC8B,kBAAN,CAAyBI,eAJL,EAKpBlC,KAAK,CAAC8B,kBAAN,CAAyBK,IALL,EAMpBnC,KAAK,CAAC8B,kBAAN,CAAyBM,UANL,EAOpBpC,KAAK,CAAC8B,kBAAN,CAAyBO,GAPL,EAQpBrC,KAAK,CAAC8B,kBAAN,CAAyBQ,OARL,EASpBtC,KAAK,CAAC8B,kBAAN,CAAyBS,YATL;CALtB,SADe;CAdV,OAAP;CAkCA;;;mCAEalE,MAAM6B,aAAa;CAAA;;CAChC;CACAF,MAAAA,KAAK,CAACI,aAAN,CAAoBF,WAApB,EACEsC,IADF,CACQ,UAACC,OAAD,EAAa;CACnB;CACA,YAAIC,MAAM,GAAGD,OAAO,CAACE,YAAR,CAAqB;CACjCtB,UAAAA,IAAI,EAAErB,KAAK,CAAC4C,UAAN,CAAiBC,GADU;CAEjCC,UAAAA,KAAK,EAAE,KAAI,CAAC1D,SAAL,CAAe,aAAf,KAAiCY,KAAK,CAAC+C,WAAN,CAAkBC,KAFzB;CAGjCC,UAAAA,KAAK,EAAE,KAAI,CAAC7D,SAAL,CAAe,aAAf,KAAiCY,KAAK,CAACkD,WAAN,CAAkBC;CAHzB,SAArB,CAAb,CAFmB;;CASnBT,QAAAA,MAAM,CAACU,KAAP,CAAa/E,IAAb,EATmB;;CAYnBqE,QAAAA,MAAM,CAACW,EAAP,CAAUrD,KAAK,CAACsD,eAAN,CAAsBC,KAAhC,EAAuC,SAASC,oBAAT,GAAgC;CACtE;CACAf,UAAAA,OAAO,CAACgB,QAAR;CACA,SAHD,EAZmB;;CAkBnBhB,QAAAA,OAAO,CAACY,EAAR,CAAWrD,KAAK,CAAC0D,gBAAN,CAAuBC,OAAlC,EAA2C,UAACC,KAAD,EAAW;CACrD;CACAC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;;CAEA,UAAA,KAAI,CAACG,MAAL,CAAYtB,OAAZ,EAAqBmB,KAArB;CAEA;CACL;CACA;CACA;CACA;CAGK;;CACA,SAdD,EAlBmB;;CAmCnBnB,QAAAA,OAAO,CAACY,EAAR,CAAWrD,KAAK,CAAC0D,gBAAN,CAAuBM,KAAlC,EAAyC,SAASC,cAAT,CAAwBL,KAAxB,EAA+B;CACvE;CACA;CAEA;CACAC,UAAAA,OAAO,CAACC,GAAR,CAAY;CAAC,sBAAUF;CAAX,WAAZ;CACAnB,UAAAA,OAAO,CAACyB,QAAR,CAAiBlE,KAAK,CAACmE,cAAN,CAAqBH,KAAtC;CACA,SAPD,EAnCmB;CA6CnB;;CACAvB,QAAAA,OAAO,CAACY,EAAR,CAAWrD,KAAK,CAAC0D,gBAAN,CAAuBU,KAAlC,EAAyC,SAASC,cAAT,CAAwBT,KAAxB,EAA+B;CAEvE,SAFD;CAGA,OAlDF,EAmDEU,KAnDF,CAmDQ,UAAUC,GAAV,EAAe;CACrB;CACAV,QAAAA,OAAO,CAACC,GAAR,CAAY;CAAC,gCAAsBS;CAAvB,SAAZ;CACA,OAtDF;CAuDA;;;4BAEM9B,SAAS+B,eAAe;CAAA;;CAC9BC,MAAAA,KAAK,CAAC,KAAKrF,SAAL,CAAe,uBAAf,CAAD,EAA0C;CAC9CP,QAAAA,MAAM,EAAE,MADsC;CAE9C6F,QAAAA,OAAO,EAAE;CACR,0BAAgB;CADR,SAFqC;CAK9CC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;CACpBC,UAAAA,OAAO,EAAE,KAAK1F,SAAL,CAAe,aAAf,CADW;CAEpB2F,UAAAA,MAAM,EAAE,MAFY;CAGpBC,UAAAA,UAAU,EAAER,aAHQ;CAIpBS,UAAAA,UAAU,EAAE,KAAK7F,SAAL,CAAe,YAAf,CAJQ;CAKpB8F,UAAAA,WAAW,EAAE,KAAK9F,SAAL,CAAe,aAAf;CALO,SAAf;CALwC,OAA1C,CAAL,CAaEoD,IAbF,CAaO,UAAA2C,QAAQ;CAAA,eAAIA,QAAQ,CAACC,IAAT,EAAJ;CAAA,OAbf,EAcE5C,IAdF,CAcO,UAAAvF,MAAM,EAAI;CACfwF,QAAAA,OAAO,CAACyB,QAAR,CAAiBlE,KAAK,CAACmE,cAAN,CAAqBkB,OAAtC;;CAEA,YAAIpI,MAAM,CAACqI,OAAP,KAAmB,IAAvB,EAA6B;CAC5B,UAAA,MAAI,CAACpH,MAAL,CAAYqH,EAAZ,CAAetI,MAAM,CAACuI,KAAtB,EAA6BvI,MAA7B;CACA,SAFD,MAEO;CACN,UAAA,MAAI,CAACiB,MAAL,CAAYqH,EAAZ,CAAe,OAAf,EAAwBtI,MAAxB;CACA;CACD,OAtBF;CAuBA;;;GA1ImCW;;6BAAhBqC,yBAEE;6BAFFA,qBAIF;CACjBrD,EAAAA,QAAQ,EAAE;CADO;;KCLE6I;;;;;;;0BAERpE,MAAM;CACjB,UAAIA,IAAI,KAAK,KAAb,EAAoB;CACnB,eAAO,IAAIqE,OAAJ,EAAP;CACA,OAFD,MAEO,IAAIrE,IAAI,KAAK,UAAb,EAAyB;CAC/B,eAAO,IAAIvB,MAAJ,EAAP;CACA,OAFM,MAEA,IAAIuB,IAAI,KAAK,OAAb,EAAsB;CAC5B,eAAO,IAAItB,OAAJ,EAAP;CACA,OAFM,MAEA,IAAIsB,IAAI,KAAK,SAAb,EAAwB;CAC9B,eAAO,IAAIpB,OAAJ,EAAP;CACA;;CAED,YAAM,IAAI+D,KAAJ,CAAU,kBAAkB3C,IAA5B,CAAN;CACA;;;;;KCjBWsE,MAAb;CAQC,kBAAYC,OAAZ,EAAmC;CAAA,QAAd/H,OAAc,uEAAJ,EAAI;CAAA;CAAA,kDANxB;CACVgI,MAAAA,gBAAgB,EAAI,gFADV;CAEVC,MAAAA,eAAe,EAAO,+EAFZ;CAGVC,MAAAA,aAAa,EAAO;CAHV,KAMwB;CAClC,SAAK/G,EAAL,GAAU4G,OAAV;CACA,SAAK/H,OAAL,GAAeC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKE,QAAvB,EAAiCJ,OAAjC,CAAf;CACA;;CAXF;CAAA;CAAA,4BAaSS,IAbT,EAae;CACb,WAAKiH,EAAL,CAAQ,SAAR,EAAmBjH,IAAnB;CACA;CAfF;CAAA;CAAA,uBAiBI+C,IAjBJ,EAiBU/C,IAjBV,EAiBgB;CACd,UAAM0H,IAAI,GAAG,KAAKC,QAAL,CAAc5E,IAAd,CAAb;CAEA2E,MAAAA,IAAI,CAACE,MAAL,CAAY,KAAKlH,EAAjB,EAAqBV,IAArB;CACA;CArBF;CAAA;CAAA,6BAuBU+C,IAvBV,EAuBgB;CACd,UAAM2E,IAAI,GAAGG,OAAW,CAACC,IAAZ,CAAiB/E,IAAjB,CAAb;CAEA2E,MAAAA,IAAI,CAACK,SAAL,CAAe,IAAf;CAEA,aAAOL,IAAP;CACA;CA7BF;CAAA;CAAA;;;;;;;;"}