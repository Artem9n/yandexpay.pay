this.BX=this.BX||{},this.BX.YandexPay=this.BX.YandexPay||{},this.BX.YandexPay.Ui=this.BX.YandexPay.Ui||{},function(t){"use strict";class e{static getInstance(){return null==this.instance&&(this.instance=new this),this.instance}constructor(t={}){this.options=Object.assign({},this.constructor.defaults,t)}load(t){if(null!=this._loadPromise)return this._loadPromise;const e=this.loaded();return null!=e?Promise.resolve(e):(this._loadElapsed=0,this._loadPromise=new Promise(((e,s)=>{this.injectScript(t),this.waitLoaded(e,s)})),this._loadPromise.finally((()=>{this._loadPromise=null})),this._loadPromise)}loaded(){var t;return null==(null==(t=window.ymaps)?void 0:t.Map)?null:window.ymaps}injectScript(t){const e=window.document.head||window.document.body||window.document.documentElement,s=document.createElement("script");s.src=this.options.scriptUrl+"&apikey="+encodeURIComponent(t),e.appendChild(s),s.onload=()=>{e.removeChild(s)}}waitLoaded(t,e){const s=this.loaded();null==s?(this._loadElapsed>this.options.loadTimeout&&e(new Error("cant load ymaps")),setTimeout((()=>{this.waitLoaded(t,e)}),this.options.loadStep),this._loadElapsed+=this.options.loadStep):t(s)}}e.defaults={scriptUrl:"https://enterprise.api-maps.yandex.ru/2.0/?load=package.full&mode=release&lang=ru&wizard=bitrix",loadStep:100,loadTimeout:3e4};class s extends BX.ui.autoComplete{downloadBundle(t,e,s,i){ymaps.geocode(t.QUERY).then((t=>{console.log(t)}))}}class i{constructor(t,e={}){this.$el=t,this.el=this.$el[0],this.options=Object.assign({},this.constructor.defaults,{}),this.initialize()}initialize(){console.log(s),this.widget=new s({scope:this.el})}}i.defaults={};class o extends BX.YandexPay.Plugin.Base{constructor(...t){super(...t),this.searchStop=t=>{},this.searchEnd=t=>{console.log(t)}}initialize(){super.initialize(),e.getInstance().load(this.options.apiKey).then((()=>{this.bootMap(),this.bootSuggest()}))}bootMap(){const t=this.getElement("map");return this._map=new ymaps.Map(t[0],{center:[50,50],zoom:13}),this._map}bootSuggest(){const t=this.getElement("suggest");this._suggest=new i(t,{})}search(){const t=this.getElement("suggest").val();this._mapLibrary.geocode(t).then(this.searchEnd,this.searchStop)}}o.defaults={mapElement:".js-field-warehouse__map",suggestElement:".js-field-warehouse__suggest",apiKey:null},o.dataName="uiFieldWarehouse",t.Warehouse=o}(this.BX.YandexPay.Ui.Field=this.BX.YandexPay.Ui.Field||{});
//# sourceMappingURL=script.js.map
